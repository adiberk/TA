<p id="notice"><%= notice %></p>
<% provide(:title, @user.first_name) %>

   <div class="container-fluid main-contain">
      <div class="row">
        <%= render 'layouts/sidebar' %>
         <div class="col-sm-2">
          <p>
            <img src="http://www.hbc333.com/data/out/190/47199326-profile-pictures.png" height = "100" width = "100" />
          </p>
        </div>

        <div class="col-sm-2 user_name">
          <p>
            <h3> <%=@user.first_name%> <%=@user.last_name%></h3>
          </p>
        </div>

        <div class="col-sm-7 col-lg-9 course_appoint">
          <p>
            <strong>Courses</strong>
            <ul>
                <% course_list = current_user().courses %>
                <% course_list.each do |c| %>
                    <li> <%= link_to "#{c.name}", :controller => "courses", :action =>"show", :course_id=>"#{c.id}", :course_name=>"#{c.name}", :class=>"ui-button-text button_text" %> </li>
                <% end %>

            </ul>
          </p>
        </div>
      </div>
      <div class = 'row'>
        <div id='appointments'><%=render 'appointments'%></div>
      </div>
    </div>
    <body>
        <div class="container">
            <div id="target" style="margin: auto; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-start;">
              <%=create_header%>
              <%=create_cal(Course.find(2))%>
            </div>
        </div>
<!--         <div class="container">
            <div id="mytarget" style="margin: auto; width: 50%; height: 100%; display: flex; flex-direction: row; justify-content: center;">
            </div>
        </div> -->
        <script>
            // $().weekly_schedule();
            $('.schedule').on('selectionmade', function() {
              console.log("Selection Made");

            }).on('selectionremoved', function() {
              console.log("Selection Removed");
            });
            $(document).ready( function() {
              var mousedown = false;
              var devarionMode = false;
              // $('#cal-table').on('mousedown', function(event) {
              //   var target = $(event.target);
              //   $td = target.closest('div');
              //   mousedown = true;
              //   $td.append('HELLO');
              //   var col   = $td.index();
              //   var row   = $td.closest('div').index();

              //   // $('#debug').prepend('<div class="debugLine">Cell at position (' + [col,row].join(',') + ') clicked!</div>' );

              //   console.log("TARGET = " + td);
                
              // // }).on('mouseup', function(){

              // });
              $('.hour').on('click', function(event) {
                  var count = 0;
              // }).on('mousedown', function() {
                  // mousedown = true;
                  // focusOn($(this).parent());

                  if ($(this).hasClass('selected')) {
                      $(this).trigger('selectionremoved')
                      $(this).removeClass('selected');
                      time = $(this).children().remove()
                      console.log(time)
                      // devarionMode = true;
                  }
                  else {
                      $(this).trigger('selectionmade')
                      $(this).addClass('selected');
                      $(this).addClass('counter');
                      $(this).append("<h4 class = 'time-added'>HELLO</h4>");

                  }
                  // $(this).removeClass('hover');
              // }).on('mouseup', function() {
                  // devarionMode = false;
                  // mousedown = false;
                  // clearFocus();
              // }).on('mouseleave', function () {
              //     if (!mousedown) {
              //         $(this).removeClass('hover');
              //     }
              });

              // function focusOn(day) {
              //   var targetDayClass = $(day).attr('class').split('\ ')[1];
              //   var dayContainer = $('.day');

              //   for (var i = 0; i < dayContainer.length; i++) {
              //       if ($(dayContainer[i]).hasClass(targetDayClass)) {
              //           continue;
              //       }
              //       console.log("HEYP");
              //       var hours = $(dayContainer[i]).children();
              //       for (var j = 0; j < hours.length; j++) {
              //           $(hours[j]).addClass('disabled');
              //       }
              //   }

                // $(day).on('mouseleave', function() {
                //     clearFocus();
                //     console.log("Hover");
                //     mousedown = false;
                //     devarionMode = false;
                // });
              // }
              // function clearFocus() {
              //   var dayContainer = $('.day');

              //   for (var i = 0; i < dayContainer.length; i++) {

              //     var hours = $(dayContainer[i]).children();
              //     for (var j = 0; j < hours.length; j++) {
              //         $(hours[j]).removeClass('disabled');
              //     }
              //   }
              // }
            });
        </script>
    </body>
    <%= link_to 'Edit', edit_user_path(@user) %> |
    <%= link_to 'Back', users_path %>


